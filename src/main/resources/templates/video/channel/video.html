<!DOCTYPE html>
<html >
<head>
    <title>视频播放</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="/css/video-js.css" rel="stylesheet">
    <link href="/css/video.css" rel="stylesheet" type="text/css">
    <!-- If you'd like to support IE8 -->
    <script src="/libs/videojs-ie8.min.js"></script>

     <style type="text/css">
         .video-js .vjs-big-play-button{
          display: none;
         }
     </style>

 </head>
 <body>
 <div class="openFlashTips" style="width:300px;position:absolute;top:20px;left:225px;z-Index:9999;color:white">视频无法正常播放，请点击下方启用flash</div>
 <video id="my-video" class="video-js vjs-default-skin vjs-" controls preload="auto" width="500" height="264"
        poster="http://vjs.zencdn.net/v/oceans.png" data-setup="{}">
     <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>
     <source src="rtmp://47.96.115.217:2131/live/34020000001320000012" type="rtmp/flv"/>
 </video>
     <div id="control" style="width: 100%;">
         <span id="btnPlay" class="play" onclick="startplay(this);"></span>
         <span id="btnStopPlay" class="stopPlay" ></span>
         <span id="btnCapture" class="capture" ></span>
         <span id="btnRecord" class="record" ></span>
         <span id="btnTalk" class="talk" ></span>
     </div>
 <script src="/libs/video.js"></script>
 <embed width="500" height="264" class="openFlash" style="position:absolute;top:130px;
 left:225px;z-Index:9999;"
        type="application/x-shockwave-flash">

 <div th:include="include/footer_js::footer"></div>
 <script th:src="@{/js/base/video/channel/video.js}"></script>

 <script type="text/javascript" language="JavaScript">



     function startplay() {
         var elevCode =  vm.channel.channelCode;//$("#channelcode")[0].innerText;
         var regSvrIp = vm.channel.regWanIp;
         var regSvrPort =  vm.channel.regWanPort;//9210;//$("#regsvrport")[0].innerText;;
         var streamSvrIp = '124.91.150.149' ;//'124.91.150.149';//$("#strsvrip")[0].innerText;;
         var streamSvrPort =  '2131';//vm.channel.strmWanPort;
            // "rtmp://47.96.115.217:2131/live/34020000001320000012";
         var rtmpurl = 'rtmp://'+streamSvrIp+':'+streamSvrPort+'/live/' + elevCode;

         var myPlayer = videojs('my-video');
         myPlayer.src(rtmpurl);

         myPlayer.play();

     }




     function flashChecker() {
         var hasFlash = 0; //是否安装了flash
         var flashVersion = 0; //flash版本
         var isIE = /*@cc_on!@*/0; //是否IE浏览器
         if (isIE) {
             var swf = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');
             if (swf) {
                 hasFlash = 1;
                 VSwf = swf.GetVariable("$version");
                 flashVersion = parseInt(VSwf.split(" ")[1].split(",")[0]);
             }
         } else {
             if (navigator.plugins && navigator.plugins.length > 0) {
                 var swf = navigator.plugins["Shockwave Flash"];
                 if (swf) {
                     hasFlash = 1;
                     var words = swf.description.split(" ");
                     for (var i = 0; i < words.length; ++i) {
                         if (isNaN(parseInt(words[i]))) continue;
                         flashVersion = parseInt(words[i]);
                     }
                 }
             }
         }
         return {f: hasFlash, v: flashVersion};
     }
     var fls = flashChecker();
     var s = "";
     if (fls.f) {
         //安装了flash,当前flash版本为
         document.getElementsByClassName("openFlash")[0].style.display = "none";
         document.getElementsByClassName("openFlashTips")[0].style.display = "none";
     }
     else {
         //没有安装flash
         document.getElementsByClassName("openFlash")[0].style.display = "block";
         document.getElementsByClassName("openFlashTips")[0].style.display = "block";
     }
 </script>


 </body>

 </html>